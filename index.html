<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>buddycloud.js by buddycloud</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>buddycloud.js</h1>
        <p>It's like magic, but it's technology.</p>

        <p class="view"><a href="https://github.com/buddycloud/buddycloud.js">View the Project on GitHub <small>buddycloud/buddycloud.js</small></a></p>


        <ul>
          <li><a href="https://github.com/buddycloud/buddycloud.js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/buddycloud/buddycloud.js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/buddycloud/buddycloud.js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h2>

<p>buddycloud.js enables you to quickly build social features to your webapp. It uses <a href="http://buddycloud.com/">buddycloud's</a> distributed social network backend and is designed to be easy to use.</p>

<p><a href="buddycloud.com/buddycloudjs-reference">Full API reference</a></p>

<h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h2>

<h3>
<a name="include-buddycloudjs" class="anchor" href="#include-buddycloudjs"><span class="octicon octicon-link"></span></a>Include buddycloud.js</h3>

<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"buddycloud.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>buddycloud.js's depends on jQuery ( &gt;= 1.5).</p>

<h3>
<a name="finding-your-api-server" class="anchor" href="#finding-your-api-server"><span class="octicon octicon-link"></span></a>finding your API server</h3>

<p>buddycloud is a distributed social network. To find your API server run the following command</p>

<div class="highlight"><pre>dig -t TXT _buddycloud-api._tcp.buddycloud.org. +short
<span class="s2">"v=1.0"</span> <span class="s2">"host=api.buddycloud.org"</span> <span class="s2">"protocol=https"</span> <span class="s2">"path=/"</span> <span class="s2">"port=443"</span>
</pre></div>

<h3>
<a name="initialize" class="anchor" href="#initialize"><span class="octicon octicon-link"></span></a>Initialize</h3>

<p>Initialize buddycloud.js:</p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="nx">apiUrl</span><span class="o">:</span> <span class="s1">'https://api.buddycloud.org'</span><span class="p">,</span>
  <span class="nx">domain</span><span class="o">:</span> <span class="s1">'buddycloud.org'</span>
<span class="p">});</span>
</pre></div>

<p>By default buddycloud.js will use the buddycloud.org API. If you run your own buddycloud API, point it at that.</p>

<h3>
<a name="authentication" class="anchor" href="#authentication"><span class="octicon octicon-link"></span></a>Authentication</h3>

<p>To handle actions that needs authentication, such as following or media uploading, call the login method. The library stores your credentials (Base64 encoded) and you are ready to call any methods that requires authentication.</p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Auth</span><span class="p">.</span><span class="nx">login</span><span class="p">({</span>
  <span class="nx">jid</span><span class="o">:</span> <span class="s1">'sparkle@buddycloud.org'</span><span class="p">,</span>
  <span class="nx">password</span><span class="o">:</span> <span class="s1">'sparkle123'</span>
<span class="p">});</span>
</pre></div>

<p>The library handles <strong>one</strong> user session.</p>

<h3>
<a name="create-a-new-buddycloud-user" class="anchor" href="#create-a-new-buddycloud-user"><span class="octicon octicon-link"></span></a>Create a new buddycloud user</h3>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Account</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">jid</span><span class="o">:</span> <span class="s1">'JewlRider@buddycloud.org'</span><span class="p">,</span>
  <span class="nx">password</span><span class="o">:</span> <span class="s1">'leather-saddle22'</span><span class="p">,</span>
  <span class="nx">email</span><span class="o">:</span> <span class="s1">'jewlrider@unicorn-village.com'</span>
<span class="p">});</span>
</pre></div>

<p>Once the user is successfully created, the library stores its credentials and no login is needed.</p>

<h3>
<a name="ajax-and-promises" class="anchor" href="#ajax-and-promises"><span class="octicon octicon-link"></span></a>Ajax and promises</h3>

<p>buddycloud.js uses <a href="http://api.jquery.com/jQuery.ajax/">jQuery.ajax()</a> to make HTTP requests. Every <code>$.ajax()</code> request returns a jqXHR object that implements a Promise interface (check <a href="http://api.jquery.com/category/deferred-object/">Deferred objects</a> for more information) and can be used to verify requests results using <code>.done()</code>, <code>.fail()</code>, <code>.always()</code> and <code>.then()</code> methods.</p>

<p>An example of using promises for checking the result of a login request:</p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Auth</span><span class="p">.</span><span class="nx">login</span><span class="p">({</span>
  <span class="nx">jid</span><span class="o">:</span> <span class="s1">'sparkle@buddycloud.org'</span><span class="p">,</span> 
  <span class="nx">password</span><span class="o">:</span> <span class="s1">'sparkle123'</span>
<span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">'Login successful!'</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">'Oops, something went wrong.'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h2>
<a name="usage-example" class="anchor" href="#usage-example"><span class="octicon octicon-link"></span></a>Usage example</h2>

<h3>
<a name="getting-a-channel-nodes-content" class="anchor" href="#getting-a-channel-nodes-content"><span class="octicon octicon-link"></span></a>Getting a channel node's content</h3>

<p>Example: getting the <em>posts</em> for a user or topic channel</p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Content</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
  <span class="nx">channel</span><span class="o">:</span> <span class="s1">'sparkle@buddycloud.org'</span><span class="p">,</span>
  <span class="nx">node</span><span class="o">:</span> <span class="s1">'posts'</span>
<span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"foo"</span><span class="p">,</span>
    <span class="s2">"author"</span><span class="o">:</span> <span class="s2">"sparkle@buddycloud.org"</span><span class="p">,</span>
    <span class="s2">"updated"</span><span class="o">:</span> <span class="s2">"2013-06-01T12:00:00Z"</span><span class="p">,</span>
    <span class="s2">"content"</span><span class="o">:</span> <span class="s2">"buddycloud.js is awesome!"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"bar"</span><span class="p">,</span>
    <span class="s2">"author"</span><span class="o">:</span> <span class="s2">"henry@buddycloud.org"</span><span class="p">,</span>
    <span class="s2">"updated"</span><span class="o">:</span> <span class="s2">"2013-05-31T12:00:00Z"</span><span class="p">,</span>
    <span class="s2">"content"</span><span class="o">:</span> <span class="s2">"Hey Sparkle! How are you?"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"baz"</span><span class="p">,</span>
    <span class="s2">"author"</span><span class="o">:</span> <span class="s2">"sparkle@buddycloud.org"</span><span class="p">,</span>
    <span class="s2">"updated"</span><span class="o">:</span> <span class="s2">"2013-05-30T12:00:00Z"</span><span class="p">,</span>
    <span class="s2">"content"</span><span class="o">:</span> <span class="s2">"Feeling good today!"</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<h3>
<a name="retrieve-a-specific-item" class="anchor" href="#retrieve-a-specific-item"><span class="octicon octicon-link"></span></a>Retrieve a specific item:</h3>

<p>Example: retrieve an individual <em>post</em></p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Content</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
  <span class="nx">channel</span><span class="o">:</span> <span class="s1">'sparkle@buddycloud.org'</span><span class="p">,</span>
  <span class="nx">node</span><span class="o">:</span> <span class="s1">'posts'</span><span class="p">,</span>
  <span class="nx">item</span><span class="o">:</span> <span class="s1">'foo'</span>
<span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"foo"</span><span class="p">,</span>
  <span class="s2">"author"</span><span class="o">:</span> <span class="s2">"sparkle@buddycloud.org"</span><span class="p">,</span>
  <span class="s2">"updated"</span><span class="o">:</span> <span class="s2">"2013-06-01T12:00:00Z"</span><span class="p">,</span>
  <span class="s2">"content"</span><span class="o">:</span> <span class="s2">"I got a new saddle today!"</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="adding-new-content-to-a-channels-node" class="anchor" href="#adding-new-content-to-a-channels-node"><span class="octicon octicon-link"></span></a>Adding new content to a channel's node</h3>

<p>Example: posting a status update to a channel</p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Content</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span>
  <span class="nx">channel</span><span class="o">:</span> <span class="s1">'sparkle@buddycloud.org'</span><span class="p">,</span>
  <span class="nx">node</span><span class="o">:</span> <span class="s1">'posts'</span><span class="p">,</span>
  <span class="nx">content</span><span class="o">:</span> <span class="s1">'Meeting the unicorns for some beer tonight'</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="uploading-files-to-a-channel" class="anchor" href="#uploading-files-to-a-channel"><span class="octicon octicon-link"></span></a>Uploading files to a channel</h3>

<p>Example: sharing photos to the followers of a channel</p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Media</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'cats@topics.buddycloud.org'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">file</span><span class="o">:</span> <span class="nx">mediaFile</span><span class="p">,</span>
  <span class="nx">filename</span><span class="o">:</span> <span class="s1">'tom.jpg'</span><span class="p">,</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">'My cat Tom'</span><span class="p">,</span>
  <span class="nx">description</span><span class="o">:</span> <span class="s1">'Chasing Jerry!'</span>
<span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"id"</span><span class="o">:</span><span class="s2">"f00"</span><span class="p">,</span>
  <span class="s2">"fileName"</span><span class="o">:</span><span class="s2">"tom.jpg"</span><span class="p">,</span>
  <span class="s2">"author"</span><span class="o">:</span><span class="s2">"sparkle@buddycloud.org"</span><span class="p">,</span>
  <span class="s2">"title"</span><span class="o">:</span><span class="s2">"My cat Tom"</span><span class="p">,</span>
  <span class="s2">"mimeType"</span><span class="o">:</span><span class="s2">"image/jpeg"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="o">:</span><span class="s2">"Chasing Jerry!"</span><span class="p">,</span>
  <span class="s2">"fileExtension"</span><span class="o">:</span><span class="s2">"jpg"</span><span class="p">,</span>
  <span class="s2">"shaChecksum"</span><span class="o">:</span><span class="s2">"bc46e5fac2f1cbb607c8b253a5af33181f161562"</span><span class="p">,</span>
  <span class="s2">"fileSize"</span><span class="o">:</span><span class="mi">60892</span><span class="p">,</span>
  <span class="s2">"height"</span><span class="o">:</span><span class="mi">312</span><span class="p">,</span>
  <span class="s2">"width"</span><span class="o">:</span><span class="mi">312</span><span class="p">,</span>
  <span class="s2">"entityId"</span><span class="o">:</span><span class="s2">"cats@topics.domain.com"</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="retrieving-files-from-buddycloud" class="anchor" href="#retrieving-files-from-buddycloud"><span class="octicon octicon-link"></span></a>Retrieving files from buddycloud</h3>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Media</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
  <span class="nx">channel</span><span class="o">:</span> <span class="s1">'cats@topics.buddycloud.org'</span><span class="p">,</span>
  <span class="nx">mediaId</span><span class="o">:</span> <span class="s1">'iL3fahp8'</span>
<span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">'Media retrieved!'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>Will return a file. There is a special mediaID called <code>avatar</code> to return the channels' avatar.</p>

<p>You can also request a resized image using the <code>maxheight</code> and <code>maxwidth</code> parameters:</p>

<div class="highlight"><pre><span class="nx">buddycloud</span><span class="p">.</span><span class="nx">Media</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
  <span class="nx">channel</span><span class="o">:</span> <span class="s1">'cats@topics.buddycloud.org'</span><span class="p">,</span>
  <span class="nx">mediaId</span><span class="o">:</span> <span class="s1">'f00'</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="nx">maxheight</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="nx">maxwidth</span><span class="o">:</span> <span class="mi">100</span>
<span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">'Media thumbnail retrieved!'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="issues" class="anchor" href="#issues"><span class="octicon octicon-link"></span></a>Issues</h3>

<p>Please report issues at <a href="https://github.com/buddycloud/buddycloud.js">github.com/buddycloud/buddycloud.js</a>.
Pull requests welcomed.</p>

<h3>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h3>

<p>buddycloud.js is open source and available under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>. </p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/buddycloud">buddycloud</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-1075750-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>